define("discourse/plugins/discourse-solved/discourse/routes/user-activity-solved",["exports","discourse/routes/user-activity-stream"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({userActionType:15,noContentHelpKey:"solved.no_solutions"})}),define("discourse/plugins/discourse-solved/discourse/solved-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userActivity",map:function(){this.route("solved")}}}),define("discourse/plugins/discourse-solved/discourse/connectors/bread-crumbs-right/solved-status-filter",["exports","discourse/lib/url"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){if(t.siteSettings.show_filter_by_solved_status){if(t.siteSettings.allow_solved_on_all_topics)return!0;var s=Discourse.__container__.lookup("controller:navigation/category");return s&&s.get("category.enable_accepted_answers")}return!1},setupComponent:function(e,t){var s=["all","solved","unsolved"].map(function(e){return{name:I18n.t("solved.topic_status_filter."+e),value:e}});t.set("statuses",s);var a=window.location.search;a.match(/solved=yes/)?t.set("status","solved"):a.match(/solved=no/)?t.set("status","unsolved"):t.set("status","all")},actions:{changeStatus:function(e){var s=window.location,a=s.search,n=a.startsWith("?")?a.substr(1).split("&"):[];n=n.filter(function(e){return!e.startsWith("solved=")}),e&&"all"!==e&&(e="solved"===e?"yes":"no",n.push("solved="+e)),a=n.length>0?"?"+n.join("&"):"",t.default.routeTo(""+s.pathname+a+s.hash)}}}}),Ember.TEMPLATES["javascripts/discourse/connectors/bread-crumbs-right/solved-status-filter"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["siteSettings","solved_enabled"]]],null,{"statements":[[0,"  "],[1,[29,"combo-box",null,[["content","value","valueAttribute","onSelect"],[[25,["statuses"]],[25,["status"]],"value",[29,"action",[[24,0,[]],"changeStatus"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/bread-crumbs-right/solved-status-filter"}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-summary-stat/solved-count"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",null,[["route"],["userActivity.solved"]],{"statements":[[0,"  "],[1,[29,"user-stat",null,[["value","label","icon"],[[25,["model","solved_count"]],"solved.solution_summary","check-square"]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/user-summary-stat/solved-count"}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-activity-bottom/solved-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",null,[["route"],["userActivity.solved"]],{"statements":[[0,"  "],[1,[29,"d-icon",["check-square"],null],false],[0," "],[1,[29,"i18n",["solved.title"],null],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/user-activity-bottom/solved-list"}}),Ember.TEMPLATES["javascripts/discourse/connectors/topic-after-cooked/solved-panel"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["topic","accepted_answer"]]],null,{"statements":[[7,"p"],[11,"class","solved"],[9],[0,"\\n"],[1,[25,["topic","acceptedAnswerHtml"]],true],[0,"\\n"],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/topic-after-cooked/solved-panel"}}),Ember.TEMPLATES["javascripts/discourse/connectors/category-custom-settings/solved-settings"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"unless",[[25,["siteSettings","allow_solved_on_all_topics"]]],null,{"statements":[[7,"h3"],[9],[1,[29,"i18n",["solved.title"],null],false],[10],[0,"\\n"],[7,"section"],[11,"class","field"],[9],[0,"\\n  "],[7,"div"],[11,"class","enable-accepted-answer"],[9],[0,"\\n    "],[7,"label"],[11,"class","checkbox-label"],[9],[0,"\\n      "],[1,[29,"input",null,[["type","checked"],["checkbox",[25,["category","enable_accepted_answers"]]]]],false],[0,"\\n      "],[1,[29,"i18n",["solved.allow_accepted_answers"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/category-custom-settings/solved-settings"}}),define("discourse/plugins/discourse-solved/discourse/pre-initializers/extend-category-for-solved",["exports","ember-addons/ember-computed-decorators","discourse/models/category"],function(e,t,s){"use strict";function a(e,t,s,a,n){var o={};return Object.keys(a).forEach(function(e){o[e]=a[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-category-for-solved",before:"inject-discourse-objects",initialize:function(){var e,n,o;s.default.reopen((e=(0,t.default)("custom_fields.enable_accepted_answers"),n={enable_accepted_answers:{get:function(e){return"true"===e},set:function(e){return e=e?"true":"false",this.set("custom_fields.enable_accepted_answers",e),e}}},a(n,"enable_accepted_answers",[e],(o=Object.getOwnPropertyDescriptor(n,"enable_accepted_answers"),o=o?o.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return o}}),n),n))}}}),define("discourse/plugins/discourse-solved/discourse/initializers/extend-for-solved-button",["exports","discourse/models/topic","discourse/models/user","discourse/raw-views/topic-status","discourse/helpers/topic-status-icons","discourse/lib/ajax-error","discourse/lib/plugin-api","discourse/lib/ajax","discourse/widgets/post-cooked","discourse/lib/utilities","discourse-common/lib/icon-library"],function(e,t,s,a,n,o,r,c,i,l,u){"use strict";function d(e){e.get("postStream.posts").forEach(function(e){e.get("post_number")>1&&(e.set("accepted_answer",!1),e.set("can_accept_answer",!0),e.set("can_unaccept_answer",!1))})}function p(e){if(e.get("can_unaccept_answer")){var t=e.topic;e.setProperties({can_accept_answer:!0,can_unaccept_answer:!1,accepted_answer:!1}),t.set("accepted_answer",void 0),(0,c.ajax)("/solution/unaccept",{type:"POST",data:{id:e.get("id")}}).catch(o.popupAjaxError)}}function v(e){var t=e.topic;d(t),e.setProperties({can_unaccept_answer:!0,can_accept_answer:!1,accepted_answer:!0}),t.set("accepted_answer",{username:e.get("username"),post_number:e.get("post_number"),excerpt:e.get("cooked")}),(0,c.ajax)("/solution/accept",{type:"POST",data:{id:e.get("id")}}).catch(o.popupAjaxError)}function m(e){var t=e.getCurrentUser();n.default.addObject(["has_accepted_answer","far-check-square","solved"]),e.includePostAttributes("can_accept_answer","can_unaccept_answer","accepted_answer"),e.addDiscoveryQueryParam&&e.addDiscoveryQueryParam("solved",{replace:!0,refreshModel:!0}),e.addPostMenuButton("solved",function(e){var s=e.can_accept_answer,a=e.can_unaccept_answer,n=e.accepted_answer,o=t&&t.id===e.topicCreatedById,r=n||!s||o?"first":"second-last-hidden";if(s)return{action:"acceptAnswer",icon:"far-check-square",className:"unaccepted",title:"solved.accept_answer",label:"solved.solution",position:r};if(a&&n){return{action:"unacceptAnswer",icon:"check-square",title:a?"solved.unaccept_answer":"solved.accepted_answer",className:"accepted fade-out",position:r,label:"solved.solution"}}return!s&&n?{className:"hidden",disabled:"true",position:r,beforeButton:function(e){return e("span.accepted-text",{title:I18n.t("solved.accepted_description")},[e("span",(0,u.iconNode)("check")),e("span.accepted-label",I18n.t("solved.solution"))])}}:void 0}),e.decorateWidget("post-contents:after-cooked",function(e){if(1===e.attrs.post_number){var t=e.getModel();if(t){var s=t.get("topic");if(s.get("accepted_answer")){var a=!!s.get("accepted_answer").excerpt,n="\n            <aside class='quote accepted-answer' data-post=\""+s.get("accepted_answer").post_number+'" data-topic="'+s.get("id")+"\">\n              <div class='title'>\n                "+s.get("acceptedAnswerHtml")+' <div class="quote-controls"></div>\n              </div>\n              <blockquote>\n                '+s.get("accepted_answer").excerpt+"\n              </blockquote>\n            </aside>",o="\n            <aside class='quote accepted-answer'>\n              <div class='title title-only'>\n                "+s.get("acceptedAnswerHtml")+"\n              </div>\n            </aside>",r=new i.default({cooked:a?n:o}),c=r.init();return e.rawHtml(c)}}}}),e.attachWidgetAction("post","acceptAnswer",function(){var e=this,t=this.model,s=t.get("topic.postStream.posts").filter(function(e){return 1===e.get("post_number")||e.get("accepted_answer")});v(t),s.forEach(function(t){return e.appEvents.trigger("post-stream:refresh",{id:t.id})})}),e.attachWidgetAction("post","unacceptAnswer",function(){var e=this.model,t=e.get("topic.postStream.posts").find(function(e){return 1===e.get("post_number")});p(e),this.appEvents.trigger("post-stream:refresh",{id:t.get("id")})}),e.registerConnectorClass&&(e.registerConnectorClass("user-activity-bottom","solved-list",{shouldRender:function(e,t){return t.siteSettings.solved_enabled}}),e.registerConnectorClass("user-summary-stat","solved-count",{shouldRender:function(e,t){return t.siteSettings.solved_enabled&&e.model.solved_count>0},setupComponent:function(){this.set("classNames",["linked-stat"])}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-for-solved-button",initialize:function(){t.default.reopen({acceptedAnswerHtml:function(){var e=this.get("accepted_answer.username"),t=this.get("accepted_answer.post_number");return e&&t?I18n.t("solved.accepted_html",{icon:(0,u.iconHTML)("check-square",{class:"accepted"}),username_lower:e.toLowerCase(),username:(0,l.formatUsername)(e),post_path:this.get("url")+"/"+t,post_number:t,user_path:s.default.create({username:e}).get("path")}):""}.property("accepted_answer","id")}),a.default.reopen({statuses:function(){var e=this._super();return this.topic.has_accepted_answer?e.push({openTag:"span",closeTag:"span",title:I18n.t("topic_statuses.solved.help"),icon:"far-check-square"}):this.topic.can_have_answer&&this.siteSettings.solved_enabled&&this.siteSettings.empty_box_on_unsolved&&e.push({openTag:"span",closeTag:"span",title:I18n.t("solved.has_no_accepted_answer"),icon:"square-o"}),e}.property()}),(0,r.withPluginApi)("0.1",m),(0,r.withPluginApi)("0.8.10",function(e){e.replaceIcon("notification.solved.accepted_notification","check-square")})}}});
//# sourceMappingURL=/assets/plugins/discourse-solved-4b2a8238b826c7d8e52c026a65261be733c46dead1b2f86f82d39d58277d954e.js.map