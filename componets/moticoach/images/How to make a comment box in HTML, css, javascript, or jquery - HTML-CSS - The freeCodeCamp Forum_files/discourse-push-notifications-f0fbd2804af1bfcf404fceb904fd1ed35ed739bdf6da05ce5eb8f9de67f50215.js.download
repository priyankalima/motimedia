Ember.TEMPLATES["javascripts/connectors/user-preferences-desktop-notifications/user-push-notification-input"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[23,"push-notification-config"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-preferences-desktop-notifications/user-push-notification-input"}}),Ember.TEMPLATES["javascripts/components/push-notification-config"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["showSetting"]]],null,{"statements":[[0,"  "],[7,"label"],[11,"class","checkbox-label"],[9],[0,"\\n    "],[7,"input"],[12,"checked",[25,["currentUser","custom_fields","discourse_push_notifications_prefer_push"]]],[12,"onclick",[29,"action",[[24,0,[]],"change"],[["value"],["target.checked"]]]],[11,"type","checkbox"],[9],[10],[0,"\\n    "],[1,[29,"i18n",["discourse_push_notifications.note"],null],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/push-notification-config"}}),define("discourse/plugins/discourse-push-notifications/discourse/components/push-notification-config",["exports","ember-addons/ember-computed-decorators","discourse/lib/push-notifications"],function(e,i,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Component.extend((s={showSetting:function(){return this.siteSettings.desktop_push_notifications_enabled},actions:{change:function(e){e?(this.currentUser.set("custom_fields.discourse_push_notifications_prefer_push",!0),t.keyValueStore.setItem("prefer_push","true")):(this.currentUser.set("custom_fields.discourse_push_notifications_prefer_push",!1),t.keyValueStore.setItem("prefer_push",""))}}},function(e,i,t,s,n){var o={};return Object.keys(s).forEach(function(e){o[e]=s[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(t,s){return s(e,i,t)||t},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,i,o),o=null),o}(s,"showSetting",[i.default],Object.getOwnPropertyDescriptor(s,"showSetting"),s),s))}),define("discourse/plugins/discourse-push-notifications/discourse/initializers/setup-push-notifications",["exports","discourse/lib/plugin-api","discourse/lib/push-notifications"],function(e,i,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"setup-push-notifications",initialize:function(e){(0,i.withPluginApi)("0.1",function(i){var s=e.lookup("site-settings:main");!Ember.testing&&i.getCurrentUser()&&(s.desktop_push_notifications_enabled?(i.modifyClass("controller:preferences/notifications",{saveAttrNames:["muted_usernames","new_topic_duration_minutes","auto_track_topics_after_msecs","notification_level_when_replying","like_notification_frequency","allow_private_messages","custom_fields"]}),i.modifyClass("component:desktop-notification-config",{isPushNotificationsPreferred:function(){return!(!this.site.mobileView&&!t.keyValueStore.getItem("prefer_push"))&&(0,t.isPushNotificationsSupported)(this.site.mobileView)}}),i.getCurrentUser().custom_fields.discourse_push_notifications_prefer_push?t.keyValueStore.setItem("prefer_push","true"):t.keyValueStore.setItem("prefer_push","")):t.keyValueStore.setItem("prefer_push",""))})}}});
//# sourceMappingURL=/assets/plugins/discourse-push-notifications-f0fbd2804af1bfcf404fceb904fd1ed35ed739bdf6da05ce5eb8f9de67f50215.js.map