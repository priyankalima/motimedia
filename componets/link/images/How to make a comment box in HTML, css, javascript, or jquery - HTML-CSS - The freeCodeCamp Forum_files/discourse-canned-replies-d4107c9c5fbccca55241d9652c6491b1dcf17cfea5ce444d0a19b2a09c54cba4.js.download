Ember.TEMPLATES["javascripts/modal/edit-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["canned_replies.edit.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[29,"canned-replies-form",null,[["title","content"],[[25,["replyTitle"]],[25,["replyContent"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer canned-replies-footer"],[9],[0,"\\n  "],[1,[29,"d-button",null,[["class","action","label","disabled"],["btn-primary edit-reply-save-btn",[29,"action",[[24,0,[]],"save"],null],[25,["savingLabel"]],[25,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[7,"a"],[9],[1,[29,"i18n",["cancel"],null],false],[3,"action",[[24,0,[]],"cancel"]],[10],[0,"\\n\\n  "],[1,[29,"d-button",null,[["class","action","icon","disabled"],["btn-danger pull-right",[29,"action",[[24,0,[]],"remove"],null],"trash-alt",[25,["saving"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/edit-reply"}}),Ember.TEMPLATES["javascripts/modal/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class","style"],["canned_replies.insert.modal_title","canned-replies-modal","overflow: visible"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[25,["loadingReplies"]]]],{"statements":[[0,"    "],[7,"div"],[11,"class","details"],[9],[0,"\\n      "],[7,"div"],[11,"class","reply-selector"],[9],[0,"\\n        "],[7,"div"],[11,"class","selector"],[9],[0,"\\n          "],[1,[29,"combo-box",null,[["id","valueAttribute","value","nameProperty","content","none"],["canned-replies-combobox","id",[25,["selectedReplyId"]],"title",[25,["replies"]],"canned_replies.insert.choose"]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"if",[[25,["selectedReply"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","content"],[9],[0,"\\n          "],[7,"div"],[9],[1,[29,"cook-text",[[25,["selectedReply","content"]]],null],true],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n  "],[1,[29,"d-button",null,[["class","action","icon","label"],["pull-left canned-replies-new",[29,"action",[[24,0,[]],"newReply"],null],"plus","canned_replies.insert.new_button"]]],false],[0,"\\n\\n"],[4,"if",[[25,["selectedReply"]]],null,{"statements":[[0,"    "],[1,[29,"d-button",null,[["class","action","icon","label"],["pull-left canned-replies-edit",[29,"action",[[24,0,[]],"editReply"],null],"pencil-alt","canned_replies.insert.edit_button"]]],false],[0,"\\n\\n    "],[1,[29,"d-button",null,[["class","action","icon","label"],["btn-primary pull-right canned-replies-apply",[29,"action",[[24,0,[]],"apply"],null],"far-clipboard","canned_replies.insert.insert_button"]]],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/canned-replies"}}),Ember.TEMPLATES["javascripts/modal/new-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["canned_replies.add.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[29,"canned-replies-form",null,[["title","content"],[[25,["newTitle"]],[25,["newContent"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer canned-replies-footer"],[9],[0,"\\n  "],[1,[29,"d-button",null,[["class","action","label","disabled"],["btn-primary new-reply-save-btn",[29,"action",[[24,0,[]],"save"],null],"save",[25,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[7,"a"],[9],[1,[29,"i18n",["cancel"],null],false],[3,"action",[[24,0,[]],"cancel"]],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/new-reply"}}),Ember.TEMPLATES["javascripts/connectors/editor-preview/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["r"],"statements":[[4,"if",[[25,["isVisible"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","d-editor-preview"],[9],[0,"\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[25,["loadingReplies"]]]],{"statements":[[0,"      "],[1,[29,"d-button",null,[["class","action","icon","label"],["canned-replies-new",[29,"action",[[24,0,[]],"newReply"],null],"plus","canned_replies.insert.new_button"]]],false],[0,"\\n      "],[1,[29,"text-field",null,[["class","value","placeholder"],["canned-replies-filter",[25,["listFilter"]],[29,"i18n",["canned_replies.filter_hint"],null]]]],false],[0,"\\n      "],[7,"a"],[11,"class","close pull-right"],[9],[1,[29,"d-icon",["times"],null],false],[3,"action",[[24,0,[]],"hide"]],[10],[0,"\\n\\n      "],[7,"hr"],[9],[10],[0,"\\n\\n"],[4,"each",[[25,["filteredReplies"]]],null,{"statements":[[0,"        "],[1,[29,"canned-reply",null,[["reply"],[[24,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/editor-preview/canned-replies"}}),Ember.TEMPLATES["javascripts/components/canned-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","canned-reply"],[9],[0,"\\n  "],[7,"div"],[11,"class","canned-reply-title"],[9],[0,"\\n    "],[1,[29,"d-button",null,[["class","action","icon"],["canned-replies-apply",[29,"action",[[24,0,[]],"apply"],null],"far-clipboard"]]],false],[0,"\\n\\n    "],[1,[29,"d-button",null,[["class","action","icon"],["canned-replies-edit",[29,"action",[[24,0,[]],"editReply"],null],"pencil-alt"]]],false],[0,"\\n\\n    "],[7,"b"],[9],[1,[25,["reply","title"]],false],[10],[0,"\\n  "],[3,"action",[[24,0,[]],"toggle"]],[10],[0,"\\n\\n"],[4,"if",[[25,["isOpen"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","canned-replies-content"],[9],[0,"\\n      "],[1,[29,"cook-text",[[25,["reply","content"]]],null],true],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/canned-reply"}}),Ember.TEMPLATES["javascripts/components/canned-replies-form"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"form"],[9],[0,"\\n  "],[7,"div"],[9],[0,"\\n    "],[7,"label"],[9],[7,"strong"],[9],[1,[29,"i18n",["canned_replies.title.name"],null],false],[10],[10],[0,"\\n    "],[1,[29,"input",null,[["class","value"],["canned-replies-form-title-input",[25,["title"]]]]],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[9],[0,"\\n    "],[7,"label"],[9],[7,"strong"],[9],[1,[29,"i18n",["canned_replies.content.name"],null],false],[10],[10],[0,"\\n    "],[1,[29,"d-editor",null,[["class","value"],["canned-replies-form-content-input",[25,["content"]]]]],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/canned-replies-form"}}),define("discourse/plugins/discourse-canned-replies/connectors/editor-preview/canned-replies",["exports","discourse/lib/show-modal","discourse/lib/ajax","discourse/lib/ajax-error","discourse-common/lib/get-owner"],function(e,n,t,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,n){n.setProperties({isVisible:!1,loadingReplies:!1,replies:[],filteredReplies:[]}),n.appEvents.has("canned-replies:show")||n.appEvents.on("canned-replies:show",function(){n.send("show")}),n.appEvents.has("canned-replies:hide")||n.appEvents.on("canned-replies:hide",function(){n.send("hide")}),n.appEvents.on("composer:will-close",function(){n.appEvents.off("canned-replies:show"),n.appEvents.off("canned-replies:hide")}),n.addObserver("listFilter",function(){var e=n.listFilter.toLowerCase(),t=n.replies.map(function(n){return n.score=0,-1!==n.title.toLowerCase().indexOf(e)?n.score+=2:-1!==n.content.toLowerCase().indexOf(e)&&(n.score+=1),n}).filter(function(e){return 0!==e.score}).sort(function(e,n){return e.score!==n.score?e.score>n.score?-1:1:e.title!==n.title?e.title<n.title?-1:1:0});n.set("filteredReplies",t)})},actions:{show:function(){var e=this;$("#reply-control .d-editor-preview-wrapper > .d-editor-preview").hide(),this.setProperties({isVisible:!0,loadingReplies:!0}),(0,t.ajax)("/canned_replies").then(function(n){e.setProperties({replies:n.replies,filteredReplies:n.replies})}).catch(l.popupAjaxError).finally(function(){e.set("loadingReplies",!1),Ember.run.schedule("afterRender",function(){return document.querySelector(".canned-replies-filter").focus()})})},hide:function(){$(".d-editor-preview-wrapper > .d-editor-preview").show(),this.set("isVisible",!1)},newReply:function(){var e=(0,i.getOwner)(this).lookup("controller:composer");e.send("closeModal"),(0,n.default)("new-reply").set("newContent",e.model.reply)}}}}),define("discourse/plugins/discourse-canned-replies/components/canned-reply",["exports","discourse/lib/show-modal","discourse/plugins/discourse-canned-replies/lib/apply-reply"],function(e,n,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({isOpen:!1,actions:{toggle:function(){this.toggleProperty("isOpen")},apply:function(){var e=Discourse.__container__.lookup("controller:composer");(0,t.default)(this.get("reply.id"),this.get("reply.title"),this.get("reply.content"),e.model),this.appEvents.trigger("canned-replies:hide")},editReply:function(){var e=Discourse.__container__.lookup("controller:composer");e.send("closeModal"),(0,n.default)("edit-reply").setProperties({composerModel:e.composerModel,replyId:this.get("reply.id"),replyTitle:this.get("reply.title"),replyContent:this.get("reply.content")})}}})}),define("discourse/plugins/discourse-canned-replies/components/canned-replies-form",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({})}),define("discourse/plugins/discourse-canned-replies/lib/apply-reply",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,n,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,l,i,s){if(s){var r={user:s.get("user.username"),original_poster:s.get("topic.details.created_by.username"),reply_to:s.get("post.reply_to_user.username"),last_user:s.get("topic.last_poster_username"),reply_to_or_last:s.get("post.reply_to_user.username")||s.get("topic.last_poster_username")};for(var a in r)r[a]&&(l=l.replace("%{"+a+"}",r[a]),i=i.replace("%{"+a+"}",r[a]))}s.appEvents.trigger("composer:insert-block",i),s&&!s.title&&s.set("title",l),(0,n.ajax)("/canned_replies/"+e+"/use",{type:"PATCH"}).catch(t.popupAjaxError)}}),define("discourse/plugins/discourse-canned-replies/initializers/add-canned-replies-ui-builder",["exports","discourse/lib/plugin-api","discourse/lib/show-modal"],function(e,n,t){"use strict";function l(e){e.modifyClass("controller:composer",{actions:{showCannedRepliesButton:function(){this.site.mobileView?(0,t.default)("canned-replies").set("composerModel",this.model):(this.appEvents.trigger("composer:show-preview"),this.appEvents.trigger("canned-replies:show"))}}}),e.addToolbarPopupMenuOptionsCallback(function(){return{id:"canned_replies_button",icon:"far-clipboard",action:"showCannedRepliesButton",label:"canned_replies.composer_button_text"}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-canned-replies-ui-builder",initialize:function(e){var t=e.lookup("site-settings:main"),i=e.lookup("current-user:main");t.canned_replies_enabled&&i&&i.can_use_canned_replies&&(0,n.withPluginApi)("0.5",l)}}}),define("discourse/plugins/discourse-canned-replies/controllers/canned-replies",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error","discourse/plugins/discourse-canned-replies/lib/apply-reply"],function(e,n,t,l,i,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o;e.default=Ember.Controller.extend(n.default,(a=(0,i.observes)("selectedReplyId"),o={selectedReply:null,selectedReplyId:"",loadingReplies:!0,init:function(){this._super.apply(this,arguments),this.replies=[]},_updateSelection:function(){this.selectionChange()},onShow:function(){var e=this;(0,l.ajax)("/canned_replies").then(function(n){e.set("replies",n.replies),e.selectionChange()}).catch(s.popupAjaxError).finally(function(){return e.set("loadingReplies",!1)})},selectionChange:function(){var e=this.get("selectedReplyId"),n="";this.get("replies").forEach(function(t){if(t.id===e)return void(n=t)}),this.set("selectedReply",n)},actions:{apply:function(){(0,r.default)(this.get("selectedReplyId"),this.selectedReply.title,this.selectedReply.content,this.composerModel),this.send("closeModal")},newReply:function(){this.send("closeModal"),(0,t.default)("new-reply").set("newContent",this.composerModel.reply)},editReply:function(){this.send("closeModal"),(0,t.default)("edit-reply").setProperties({replyId:this.selectedReplyId,replyTitle:this.get("selectedReply.title"),replyContent:this.get("selectedReply.content")})}}},function(e,n,t,l,i){var s={};return Object.keys(l).forEach(function(e){s[e]=l[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce(function(t,l){return l(e,n,t)||t},s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,n,s),s=null),s}(o,"_updateSelection",[a],Object.getOwnPropertyDescriptor(o,"_updateSelection"),o),o))}),define("discourse/plugins/discourse-canned-replies/controllers/edit-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,n,t,l,i,s){"use strict";function r(e,n,t,l,i){var s={};return Object.keys(l).forEach(function(e){s[e]=l[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce(function(t,l){return l(e,n,t)||t},s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,n,s),s=null),s}Object.defineProperty(e,"__esModule",{value:!0});var a,o,c;e.default=Ember.Controller.extend(n.default,(a=(0,i.default)("saving"),o=(0,i.default)("replyTitle","replyContent","saving"),c={replyTitle:"",replyContent:"",replyId:"",saving:null,onShow:function(){this.set("saving",null)},savingLabel:function(e){return null===e?"save":e?"saving":"saved"},disableSaveButton:function(e,n,t){return t||""===e||""===n},actions:{save:function(){var e=this;this.set("saving",!0),(0,l.ajax)("/canned_replies/"+this.replyId,{type:"PATCH",data:{title:this.replyTitle,content:this.replyContent}}).catch(s.popupAjaxError).finally(function(){e.set("saving",!1),e.appEvents.trigger("canned-replies:show")})},remove:function(){var e=this;bootbox.confirm(I18n.t("canned_replies.edit.remove_confirm"),function(n){n&&(0,l.ajax)("/canned_replies/"+e.replyId,{type:"DELETE"}).then(function(){e.send("closeModal"),e.site.mobileView?(0,t.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(s.popupAjaxError)})},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,t.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},r(c,"savingLabel",[a],Object.getOwnPropertyDescriptor(c,"savingLabel"),c),r(c,"disableSaveButton",[o],Object.getOwnPropertyDescriptor(c,"disableSaveButton"),c),c))}),define("discourse/plugins/discourse-canned-replies/controllers/new-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,n,t,l,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a;e.default=Ember.Controller.extend(n.default,(r=(0,i.default)("newTitle","newContent"),a={newTitle:"",newContent:"",onShow:function(){this.setProperties({newTitle:"",newContent:""})},disableSaveButton:function(e,n){return""===e||""===n},actions:{save:function(){var e=this;(0,l.ajax)("/canned_replies",{type:"POST",data:{title:this.newTitle,content:this.newContent}}).then(function(){e.send("closeModal"),e.site.mobileView?(0,t.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(s.popupAjaxError)},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,t.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},function(e,n,t,l,i){var s={};return Object.keys(l).forEach(function(e){s[e]=l[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce(function(t,l){return l(e,n,t)||t},s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,n,s),s=null),s}(a,"disableSaveButton",[r],Object.getOwnPropertyDescriptor(a,"disableSaveButton"),a),a))});
//# sourceMappingURL=/assets/plugins/discourse-canned-replies-d4107c9c5fbccca55241d9652c6491b1dcf17cfea5ce444d0a19b2a09c54cba4.js.map